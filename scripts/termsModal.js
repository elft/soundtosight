!function(){const e="2.0.0",t="vvavyTermsVersion",n=(e,t,n)=>{try{localStorage.setItem(e,n),t&&t!==e&&localStorage.removeItem(t)}catch(e){}},o=()=>window.vvavy||null,{DomUtils:i}=window;i&&i.onReady(async()=>{const a=i.qs("#welcomeModalContainer");if(!a)return;const s=(e=>{for(const t of e)try{const e=localStorage.getItem(t);if(null!==e)return e}catch(e){continue}return null})([t]);if(s===e)return;try{const e=await i.loadHtmlPartial("partials/welcome-modal.html");i.injectHtml(a,e)}catch(e){return}const r=i.qs("#welcomeModal",a),c=i.qs("#continueBtn",a);if(!r||!c)return;r.classList.add("active");const l=o();if(l&&"function"==typeof l.updateVisualSearchVisibility&&l.updateVisualSearchVisibility(),s&&s!==e){const t=i.qs(".modal-body",r);if(t){const n=document.createElement("div");n.className="terms-update-notice",n.innerHTML=`\n                    <h2>⚠️ Terms Have Been Updated</h2>\n                    <p><strong>Our terms and warnings have been updated since you last visited.</strong></p>\n                    <p>Please review the changes below and re-accept to continue.</p>\n                    <p class="version-info">Previous version: ${s} → Current version: ${e}</p>\n                `,t.insertBefore(n,t.firstChild)}}c.addEventListener("click",()=>{n(t,null,e),n("vvavyAccepted",null,"true");const i=o();i&&("function"==typeof i.markTermsAccepted?i.markTermsAccepted({version:e}):"function"==typeof i.setStorageItem&&i.storageKeys?.termsAccepted&&i.setStorageItem(localStorage,i.storageKeys.termsAccepted,"true"),"function"==typeof i.updateVisualSearchVisibility&&i.updateVisualSearchVisibility()),r.classList.remove("active"),setTimeout(()=>{const e=o();e&&("function"==typeof e.updateVisualSearchVisibility&&e.updateVisualSearchVisibility(),("function"!=typeof e.hasCompletedOnboarding||!e.hasCompletedOnboarding())&&("function"==typeof e.showGettingStartedOverlay?e.showGettingStartedOverlay():"function"==typeof e.showOnboardingOverlay&&e.showOnboardingOverlay()))},300)})})}();